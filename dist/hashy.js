"use strict";!function(){var e=function t(e){var o=this;e||(e={}),this.itemClass=e.itemClass||".hashy-item",this.itemAttr=e.itemAttr||"data-hash",this.triggerClass=e.triggerClass||".hashy-go",this.triggerAttr=e.triggerAttr||"href",this.averageSpeed=e.averageSpeed||100,this.offset=e.offset||0,t.checkElem=function(){var e=function(){var e;return(e=function(){t.ScrollOffset=window.pageYOffset||window.scrollTop,null==t.ScrollOffset&&(t.ScrollOffset=0);var n=t.Elems;n.forEach(function(e){var n=e.offsetTop+t.GlobalOffset,i=e.offsetHeight||e.clientHeight,l=window.innerHeight||document.documentElement.clientHeight;t.ScrollOffset+l>n&&t.ScrollOffset>n&&t.ScrollOffset<n+i&&e!==t.SelectedElem&&(t.SelectedElem=e,t.setHash(t.SelectedElem.getAttribute(o.itemAttr),!0))}),t.runtime=requestAnimationFrame(e)})()};e()},t.bind=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(o.triggerAttr)var l=o.triggerAttr;else var l=href;i.onclick=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,e.preventDefault(),t.go(e.target.getAttribute(l),!0)}}},t.go=function(e,n){var i=document.querySelector("["+o.itemAttr+'="'+e+'"]');t.scrollTo(i,e,function(){console.log("callback"),t.setHash(e,n,function(){t.checkElem()})})},t.setHash=function(e,o,n){t.history&&o===!0&&t.Hash!=e||t.history&&o===!0&&null==t.Hash?(console.log("pushing to history"),t.history.pushState({hash:e},null,"#"+e),t.Hash=e,n&&n()):window.location.hash==="#"+e||t.Hash===e||t.history?n&&n():(t.Hash=e,window.location.hash=e,n&&n())},t.checkOffset=function(e){if("string"==typeof e)var o=t.getHeight(e);else var o=e;return o=-1*o},t.getHeight=function(e){var t=document.querySelectorAll(e)[0],o=window.getComputedStyle(t).height;return o=o.replace("px"),o=parseInt(o)},t.scrollTo=function(e,n,i){if(cancelAnimationFrame(t.runtime),e.offsetTop<-1*t.GlobalOffset)var l=e.offsetTop+1;else var l=e.offsetTop+1+t.GlobalOffset;if(l>t.ScrollOffset)var r=t.ScrollOffset,s=l,a=s-r,c=function(){s>r?(r+=a/o.averageSpeed,document.body.scrollTop=r,document.documentElement.scrollTop=r):(document.documentElement.scrollTop=l,document.body.scrollTop=l,t.ScrollOffset=l,t.SelectedElem=e,clearInterval(f),i())},f=setInterval(c,1);else var r=t.ScrollOffset,s=l,a=r-s,u=function(){r>s?(r-=a/o.averageSpeed,document.body.scrollTop=r,document.documentElement.scrollTop=r):(document.documentElement.scrollTop=l,document.body.scrollTop=l,t.ScrollOffset=l,t.SelectedElem=e,clearInterval(f),i())},f=setInterval(u,1)},t.init=function(){t.bind(t.TriggerElems),t.history||(t.history=window.history)},t.runtime=function(){},t.Hash=null,t.Elems=[].slice.call(document.querySelectorAll(this.itemClass)),t.TriggerElems=document.querySelectorAll(this.triggerClass),t.ScrollOffset=0,t.SelectedElem=null,t.GlobalOffset=t.checkOffset(this.offset);var n;if(t.doneResize=function(){t.GlobalOffset=t.checkOffset(o.offset),t.ScrollOffset=document.documentElement.scrollTop||document.body.scrollTop},window.onresize=function(){clearTimeout(n),n=setTimeout(t.doneResize,100)},window.onpopstate=function(e){if(e.preventDefault(),null!=e.state)t.go(e.state.hash,!1);else{var o=window.location.hash.replace("#","");t.go(o,!1)}return!1},window.onhashchange=function(e){e.preventDefault()},window.location.hash.length&&"undefined"!=window.location.hash){var i=window.location.hash.replace("#","");window.history&&(t.history=window.history),t.go(i,!1)}for(var l=0,r=["ms","moz","webkit","o"],s=0;s<r.length&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[r[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[s]+"CancelAnimationFrame"]|window[r[s]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var o=(new Date).getTime(),n=Math.max(0,16-(o-l)),i=window.setTimeout(function(){e(o+n)},n);return l=o+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)}),t.init()};window.hashy=e}();